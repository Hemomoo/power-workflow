!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.coverNumber=t():e.coverNumber=t()}(this,(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(6));class o extends i.default{constructor(e){super(e),this.name=""}register(e={}){this.G6.registerBehavior(this.name,Object.assign({getEvents:this.getEvents},e))}getEvents(){return{}}}t.default=o},function(e,t,n){"use strict";var a=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(14),r=i(n(2)),s=i(n(10)),d={hoverNode:function(e,t){const n=e.getContainer();t?n.showAnchor():n.clearAnchor()},selectNode:function(e,t){const n=e.getContainer().getChildByIndex(0);t?n.attr("opacity",1):n.attr("opacity",.6)},visibleNode:function(e,t){e.get("group");const n=e.getModel();if("hide"===t){const t=n.startPos,a=n.endPos,i=Math.abs(a.x-t.x),o=Math.abs(a.Y-t.Y);let r=.02*i,s=.02*o,d=n.startPos.x,l=n.startPos.x,c=setInterval(()=>{d<a.x&&clearInterval(c),e.update({x:d-=r,y:l-=s})},20)}}};class l extends o.RegisterNode{constructor(e,t=!1){super(e),this.name="base-node",this.size={width:180,height:70},this.canvas=null,t||this.register()}draw(e,t,n){this.size=this.computeNodeSize(e);return this.drawKeyShape(e,t)}afterDraw(e,t,n){}updateShape(e,t){var{index:n=0}=t,i=a(t,["index"]);e.getChildByIndex(n).attr(i)}getTextWidth(e){this.canvas=this.canvas||document.createElement("canvas");var t=this.canvas.getContext("2d");return t.font="10px",t.measureText(e).width-2*e.length}getTextWidth1(e,t){var n=document.createElement("span");n.style.fontSize=e;var a={};return a.width=n.offsetWidth,a.height=n.offsetWidth,n.style.visibility="hidden",document.body.appendChild(n),void 0!==n.textContent?n.textContent=t:n.innerText=t,a=n.offsetWidth-a.width,n.parentNode.removeChild(n),a-1.5*t.length}getTextWidth2(e,t){const n=e;return this.calcStrLen(t)*n/2}calcStrLen(e){for(var t=0,n=0;n<e.length;n++)e.charCodeAt(n)>0&&e.charCodeAt(n)<128?t=.2+ ++t:t+=2;return t}withByContain(e,t){return 2*e/t}textWidthToEllipsis({text:e,threshold:t=4,width:n=this.size.width,fontSize:a=12}){const i=this.withByContain(n,a)-t;let o="",r=0;for(var s=0;s<e.length;s++){if(e.charCodeAt(s)>0&&e.charCodeAt(s)<128?r++:r+=2,r>i){o+="...";break}o+=e[s]}return o}drawKeyShape(e,t){let n=this.size.width,a=this.size.height;const{style:i={}}=e,o=Object.assign(Object.assign(Object.assign({},r.default.base.origin),{width:n,height:a}),i),s=t.addShape("rect",{attrs:o,name:"base-node",className:"base-node"});return this.initAnchor(t),s}initAnchor(e,t={}){e.anchorShapes=[],e.showAnchor=()=>{this.drawAnchor(e,t)},e.clearAnchor=()=>{this.clearAnchor(e)}}drawAnchor(e,t={}){const n=e.get("children")[0].getBBox();this.getAnchorPoints(t).forEach((t,a)=>{const i=e.addGroup();new s.default({group:i,index:a,model:{style:{x:n.minX+n.width*t[0],y:n.minY+n.height*t[1]}}}),e.anchorShapes.push(i)})}clearAnchor(e){e.anchorShapes&&e.anchorShapes.forEach(e=>e.remove()),e.anchorShapes=[]}computeNodeSize(e){let t=e.size&&Array.isArray(e.size)?e.size:[180,70];return{width:t[0]?t[0]:180,height:t[1]?t[1]:70}}getAnchorPoints(e){return[[.5,0],[1,.5],[.5,1],[0,.5]]}setState(e,t,n){d[e]&&d[e].call(this,n,t)}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={default:{cursor:"move"},base:{origin:{fill:"#C7E4FF",stroke:"#61B3FF",opacity:.6,lineWidth:2,radius:8,cursor:"move"}},leftText:{origin:{fill:"#014445",fontSize:12,x:12,y:12,textBaseline:"middle"}},titleText:{origin:{fontSize:14,stroke:"#2E4553",textBaseline:"middle",textAlign:"center",cursor:"move"}},statusShape:{r:3,text:{textBaseline:"middle",textAlign:"center",fontSize:12},origin:{fill:"#00BB2F"},success:{fill:"#00BB2F"},waiting:{fill:"#FE9201"},underway:{fill:"#1990FF"},faild:{fill:"#CA0101"},stop:{fill:"#72007B"}},rightText:{origin:{fill:"#014445",fontSize:12,textBaseline:"middle",textAlign:"right"}}}},function(e,t){e.exports=require("@antv/util")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@antv/g6-pc")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.extendedName=null,this.G6=e}register(e){this.G6[this.registerType](this.name,{},this.extendedName)}}},function(e,t,n){"use strict";var a,i=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function s(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function d(e,t){for(var n={},a=[],i=0;i<e.length;i++){var o=e[i],d=t.base?o[0]+t.base:o[0],l=n[d]||0,c="".concat(d," ").concat(l);n[d]=l+1;var h=s(c),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(r[h].references++,r[h].updater(u)):r.push({identifier:c,updater:m(u,t),references:1}),a.push(c)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=n.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,a){var i=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function f(e,t,n){var a=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var g=null,p=0;function m(e,t){var n,a,i;if(t.singleton){var o=p++;n=g||(g=l(t)),a=u.bind(null,n,o,!1),i=u.bind(null,n,o,!0)}else n=l(t),a=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var i=s(n[a]);r[i].references--}for(var o=d(e,t),l=0;l<n.length;l++){var c=s(n[l]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=o}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var i=(r=a,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(d," */")),o=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var r,s,d;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);a&&i[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),t.push(d))}},t}},function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},r=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=o(n(13)),l=s(n(1)),c=s(n(16)),h=s(n(17)),u=s(n(18)),f=s(n(23)),g=s(n(24)),p=s(n(26)),m=s(n(27)),x=s(n(28)),y=s(n(31)),b=n(42),w=n(43);new d.default.Grid({});t.default=class{constructor({container:e,width:t=window.innerWidth,height:n=window.innerHeight,plugins:a=[],mode:i="view",initEdges:o=[],initNodes:s=[],registerNodes:l=[],edgeCallback:c,layout:h,registerNodeList:u,animate:f=!1,registerEdgeList:g=[],registerBehaviors:p=[],diffHeight:m=0,diffWidth:y=0,treeGroup:v=!1,layoutParams:_={},defaultNode:S={},defaultEdge:O={},modes:E={}}){this.treeGroup=!1,this.animate=!1,this.registerEdgeList=[],this.registerBehaviors=[],this.diffHeight=0,this.diffWidth=0,this.layoutParams={},this.util=new w.FlowUtil,this.registerNodeByFront=()=>{this.registerNodeList.forEach(e=>{const{nodeDesc:t}=e;this.G6.registerNode(e.nodeName,{drawKeyShape(e,n){let a=null;return t.forEach((t,i)=>{0===i?a=this.reloadDrawKeyShape(e,n,t):this.reloadDrawKeyShape(e,n,t)}),a},reloadDrawKeyShape(e,t,n){let{type:a,name:i}=n,o=r(n,["type","name"]),s={};return o.mainShape&&(s={width:this.size.width,height:this.size.height}),o=Object.assign(Object.assign({},o),s),t.addShape(a,{attrs:o,name:i})}},"simple-node")})},this.reloadDrawKeyShape=(e,t,n)=>{let{type:a,name:i}=n,o=r(n,["type","name"]);return t.addShape(a,{attrs:o,name:i})},this.edgeEndCallback=(e,t)=>!this.edgeCallback||this.edgeCallback(e,t),this.container=e;this.checkProps()&&(this.width=t,this.height=n,this.plugins=a,this.mode=i,this.initEdges=o,this.initNodes=s,this.G6=d.default,this.registerNodes=l,this.edgeCallback=c,this.layout=h?Object.assign(Object.assign({},b.layoutSetting[h]),_):null,this.registerNodeList=u||[],this.animate=f,this.registerEdgeList=g,this.registerBehaviors=p,this.diffWidth=y,this.diffHeight=m,this.treeGroup=v,new x.default(d.default),this.initRegister(),this.init(S,O,E),(this.diffHeight||this.diffWidth)&&window.addEventListener("resize",this.util.debounce(()=>this.autoSize,50)))}init(e,t,n){if(this.treeGroup){this.graph=new d.TreeGraph({container:this.container,width:this.width,height:this.height,enabledStack:!0,plugins:[...this.plugins],modes:this.initMode(),layout:{type:"indented",direction:"LR",dropCap:!1,indent:300,getHeight:()=>60},animate:this.animate,defaultNode:{type:"tree-node"},defaultEdge:{type:"cover-cricle"}});const e=e=>{const t=e.target.get("modelId"),n=this.graph.findById(t),a=n.getModel();a.collapsed=!a.collapsed,this.graph.layout(),this.graph.setItemState(n,"collapse",a.collapsed)};this.graph.on("collapse-text:click",t=>{e(t)}),this.graph.on("collapse-back:click",t=>{e(t)})}else this.graph=new d.Graph({container:this.container,width:this.width,height:this.height,enabledStack:!0,plugins:[...this.plugins],modes:this.initMode(n),layout:this.layout,animate:this.animate,defaultNode:Object.assign({type:"flow-node"},e),defaultEdge:Object.assign({type:"cvte-polyline"},t)});this.mode&&this.graph.setMode(this.mode),this.graph.set("edgeEndCallback",this.edgeEndCallback),document.addEventListener("click",e=>{"CANVAS"!==e.target.nodeName&&this.graph.set("noKeyDown",!0)}),this.initData()}changeMode(){}getWorkflowData(){}onSelectedItem(){}addNode(){}addEdge(){}checkProps(){return!!this.container||(new Error("container is required!"),!1)}initMode(e={}){return this.treeGroup,Object.assign({default:["drag-canvas",{type:"zoom-canvas",sensitivity:1}],edit:["drag-canvas","cover-hover-node","cover-hover-anchor","cover-drag-node","cover-drag-anchor","cover-select-node","cover-hover-edge","cover-delete-item","cover-add-node","cover-align-node"],view:["drag-canvas","cover-select-node"]},e)}initData(){const e={nodes:this.initNodes,edges:this.initEdges};this.graph.data(e),this.graph.render(),this.layout&&this.animate&&(console.log("我是la"),setTimeout(()=>{this.graph.layout()},200))}initRegister(){[...u.default,l.default,c.default,...this.registerNodes].forEach(e=>{new e(this.G6)}),[...y.default,...this.registerBehaviors].forEach(e=>{new e(this.G6)}),[g.default].forEach(e=>{new e(this.G6)}),this.registerSideEdge(),p.default(d.default),m.default(d.default),h.default(d.default),f.default(d.default)}autoSize(){const e=window.innerWidth-this.diffWidth,t=window.innerHeight-this.diffHeight;this.changeSize(e,t)}setData(e){this.graph.data(e),this.graph.render()}setMode(e){this.graph.setMode(e)}changeSize(e,t){this.graph.changeSize(e,t)}on(e,t){this.graph.on(e,t)}fitView(e=20){this.graph.fitView(e)}fitCenter(){this.graph.fitCenter()}registerSideEdge(){this.registerEdgeList.forEach(e=>{const{name:t,extended:n,register:a}=e;n?this.G6.registerEdge(t,a,n):this.G6.registerEdge(t,a)})}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(15)),o=n(3);class r extends i.default{constructor(e){super(o.deepMix(e,{type:"anchor",isActived:!0,model:{type:"anchor",style:{r:4,fill:"#fff",shadowBlur:4,shadowColor:"#666",cursor:"crosshair"}}})),this.enableCapture(!0),this.isAnchor=!0,this.toFront()}showHotpot(){this.hotpot=this.getContainer().addShape("marker",{attrs:Object.assign(Object.assign({},this.get("model").style),{r:12,fill:"#1890FF",fillOpacity:.25}),name:"hotpot-shape",draggable:!0}),this.hotpot.toFront()}setHotspotActived(e){this.hotpot&&e&&this.hotpot.attr?this.hotpot.attr&&this.hotpot.attr({r:14,fill:"#0084FF"}):this.hotpot.attr&&this.hotpot.attr({r:12,fill:"#1890FF"})}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=new class{constructor(){this.commands={}}registerCommand(e,t){this.commands[e]&&new Error(`the ${e} command already exists`),this.commands[e]=t}executeCommand(e,t){this.commands[e]&&this.commands[e].execute(t)}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);Object.defineProperty(t,"Workflow",{enumerable:!0,get:function(){return i.default}});const o=a(n(44));var r=n(1);Object.defineProperty(t,"BaseNode",{enumerable:!0,get:function(){return r.default}});var s=n(0);Object.defineProperty(t,"RegisterBehavior",{enumerable:!0,get:function(){return s.default}});var d=n(69);Object.defineProperty(t,"ToolGroup",{enumerable:!0,get:function(){return d.ToolGroup}}),Object.defineProperty(t,"ToolItem",{enumerable:!0,get:function(){return d.ToolItem}}),t.default=o.default},function(e,t,n){"use strict";n.r(t),n.d(t,"version",(function(){return r}));var a=n(5),i=n.n(a);for(var o in a)["default","version"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);i.a.version="4.2.5",t.default=i.a;var r="4.2.5"},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterNode=void 0;const i=a(n(6));class o extends i.default{constructor(e){super(e),this.name="",this.extendedName=""}register(){const e=this;this.G6.registerNode(this.name,{draw:function(t,n){return e.draw.call(e,t,n,this)},afterDraw:function(t,n){return e.afterDraw.call(e,t,n,this)},update:function(t,n){e.update.call(e,t,n,this)},afterUpdate:function(t,n){e.afterUpdate.call(e,t,n,this)},setState:function(t,n,a){e.setState.call(e,t,n,a,this)},getAnchorPoints:function(t){return e.getAnchorPoints.call(e,t,this)},drawAnchor:function(){return e.drawAnchor&&e.drawAnchor.apply(e,arguments)},test:()=>{}},this.extendedName)}draw(e,t,n){return t.addShape("rect",{attrs:{width:170,height:70,fill:"#C7E4FF",stroke:"#61B3FF",opacity:.6,lineWidth:2,radius:8,cursor:"move"},name:"power-rect-node",className:"base-node"})}update(e,t,n){}afterUpdate(e,t,n){}afterDraw(e,t,n){}setState(e,t,n,a){}drawAnchor(e){}getAnchorPoints(e,t){return[[.5,0],[1,.5],[.5,1],[0,.5]]}}t.RegisterNode=o},function(e,t){e.exports=require("@antv/g6-core/lib/item/item")},function(e,t,n){"use strict";var a=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(1)),r=i(n(2));class s extends o.default{constructor(e){super(e,!0),this.name="flow-node",this.register()}draw(e,t,n){this.size=this.computeNodeSize(e);const a=this.drawKeyShape(e,t);return this.drawLeftText(e,t),this.drawTitleText(e,t),this.drawIcon(e.icon1,t,6),this.drawIcon(e.icon2,t,24),this.drawRightText(e,t),this.drawStatusShape(e,t),this.addShapeApi(e,t),a}afterDraw(e,t){3===e.taskStatusValue&&this.drawStatusAnimateShape(e,t),e.lineDashAnimate&&this.drawBorderAnimateShape(e,t)}addShapeApi(e,t){const n=e=>{var{index:n}=e,i=a(e,["index"]);t.getChildByIndex(n).attr(i)},i=this.size;t.updateKeyShape=e=>(n(Object.assign({index:0},e)),t),t.updateLeftText=e=>(n(Object.assign({index:1},e)),t),t.updateText=e=>(n(Object.assign({index:2},e)),t),t.updateRightText=e=>(n(Object.assign({index:5},e)),t),t.updateIcon=e=>{n(Object.assign({index:3},e))},t.textWidthToEllipsis=({text:e,threshold:t=4,width:n=i.width,fontSize:a=14})=>this.textWidthToEllipsis({text:e,threshold:t,width:n,fontSize:a})}drawLeftText(e,t){let{leftText:n,leftTextStyle:a={}}=e;if(!n)return;const i=Object.assign(Object.assign(Object.assign({},r.default.leftText.origin),{text:n}),a);return t.addShape("text",{attrs:i,name:"power-left-text",className:"node-left-text"})}drawRightText(e,t){const{rightText:n,rightTextStyle:a={}}=e,{width:i,height:o}=this.size,s=Object.assign(Object.assign(Object.assign({},r.default.rightText.origin),{text:n||"",x:i-12,y:o-12}),a);t.addShape("text",{attrs:s,name:"power-right-text",className:"right-text"})}drawTitleText(e,t){let{titleText:n,titleTextStyle:a={}}=e;if(!n)return;const i=this.size.width,o=this.size.height;n=this.textWidthToEllipsis({text:n,fontSize:14,width:this.size.width});const s=Object.assign(Object.assign(Object.assign({},r.default.titleText.origin),{text:n,x:i/2,y:o/2}),a);return t.addShape("text",{attrs:s,name:"power-title-text",className:"node-title-text",capture:!0,draggable:!0})}getStatusStyle(e){let{taskStatusValue:t}=e;const n={3:r.default.statusShape.underway,1:r.default.statusShape.waiting,5:r.default.statusShape.success,4:r.default.statusShape.faild,10:r.default.statusShape.stop};return(!t||[3,4,5,10].indexOf(t)<0)&&(t=1),n[t]}drawStatusShape(e,t){const n=this.size.width;let{taskStatus:a}=e;if(!a)return;let i=this.getStatusStyle(e);this.drawStatusText(e,t);const o=Object.assign(Object.assign({},i),{r:r.default.statusShape.r,x:n-this.getTextWidth2(12,a)-10,y:12});t.addShape("circle",{attrs:o,name:"power-status-text",className:"status-text",capture:!0,draggable:!0})}drawStatusText(e,t){const n=this.size.width,{taskStatus:a,taskStatusStyle:i={}}=e;let o=this.getStatusStyle(e);const s=Object.assign(Object.assign(Object.assign(Object.assign({},o),r.default.statusShape.text),{text:a,x:n-this.getTextWidth2(12,a)/2-4,y:12}),i);t.addShape("text",{attrs:s,name:"power-status-node",className:"status-node",capture:!0,draggable:!0})}drawIcon(e,t,n=6){const{height:a}=this.size;t.addShape("image",{attrs:{img:e,x:n,y:a-20,width:16,height:16,shadowColor:"#E6E6E6",shadowBlur:4},name:"image-shape"})}drawStatusAnimateShape(e,t){const{width:n}=this.size,a=r.default.statusShape.r,i=this.createStatusAnimateShape(e,t,"back1-shaoe",-3,.6),o=this.createStatusAnimateShape(e,t,"back1-shaoe",-2,.6),s=this.createStatusAnimateShape(e,t,"back1-shaoe",-1,.6);this.createStatusAnimate(a,i,0),this.createStatusAnimate(a,o,1e3),this.createStatusAnimate(a,s,2e3)}drawBorderAnimateShape(e,t){const n=t.getChildByIndex(0);let a=0;const i=[6,2,1,2];n.animate(()=>(a++,a>9&&(a=0),{lineDash:i,lineDashOffset:-a}),{repeat:!0,duration:4e3})}createStatusAnimate(e,t,n){t.animate({r:e+5,opacity:.1},{duration:3e3,easing:"easeCubic",delay:n,repeat:!0})}createStatusAnimateShape(e,t,n,a,i){const{width:o}=this.size,s=o-this.getTextWidth2(12,e.taskStatus)-10;return t.addShape("circle",{zIndex:a,attrs:{x:s,y:12,r:r.default.statusShape.r,fill:r.default.statusShape.underway.fill,opacity:i},name:n})}}t.default=s},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(10)),o=a(n(2)),r={hoverNode:function(e,t){const n=e.getContainer();t?n.showAnchor():n.clearAnchor()},selectNode:function(e,t){const n=e.getContainer().getChildByIndex(0);t?n.attr("opacity",1):n.attr("opacity",.6)},visibleNode:function(e,t){e.get("group");const n=e.getModel();if("hide"===t){const t=n.startPos,a=n.endPos,i=Math.abs(a.x-t.x),o=Math.abs(a.Y-t.Y);let r=.02*i,s=.02*o,d=n.startPos.x,l=n.startPos.x,c=setInterval(()=>{d<a.x&&clearInterval(c),e.update({x:d-=r,y:l-=s})},20)}}};t.default=function(e){e.registerNode("simple-node",{draw(e,t,n){this.size=this.computeNodeSize(e);const a=this.drawKeyShape(e,t);return this.initAnchor(t),a},drawKeyShape(e,t){let n=this.size.width,a=this.size.height;const{style:i={}}=e,r=Object.assign(Object.assign(Object.assign({},o.default.base.origin),{fill:"#BB0552",width:n,height:a}),i);return t.addShape("rect",{attrs:r,name:"base-node",className:"base-node"})},initAnchor(e){e.anchorShapes=[],e.showAnchor=()=>{this.drawAnchor(e)},e.clearAnchor=()=>{this.clearAnchor(e)}},clearAnchor(e){e.anchorShapes&&e.anchorShapes.forEach(e=>e.remove()),e.anchorShapes=[]},drawAnchor(e){const t=e.get("children")[0].getBBox();this.getAnchorPoints().forEach((n,a)=>{const o=e.addGroup();new i.default({group:o,index:a,model:{style:{x:t.minX+t.width*n[0],y:t.minY+t.height*n[1]}}}),e.anchorShapes.push(o)})},computeNodeSize(e){let t=e.size&&Array.isArray(e.size)?e.size:[180,70];return{width:t[0]?t[0]:180,height:t[1]?t[1]:70}},getAnchorPoints:()=>[[.5,0],[1,.5],[.5,1],[0,.5]],setState(e,t,n){r[e]&&r[e].call(this,n,t)}})}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(19)),o=a(n(20)),r=a(n(21)),s=a(n(22));t.default=[i.default,o.default,r.default,s.default]},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(1)),o=a(n(2));class r extends i.default{constructor(e){super(e,!0),this.name="max-circle-node",this.register()}drawKeyShape(e,t){this.size.width,this.size.height;const{style:n={},r:a=20}=e,i=Object.assign(Object.assign(Object.assign(Object.assign({},o.default.default),{fill:"#0577BB",stroke:"#028080"}),n),{x:a,y:a,r:a}),r=t.addShape("circle",{attrs:i,name:"max-circle-node",className:"max-circle-node"});return this.initAnchor(t),this.drawIcon(e,t),this.drawText(e,t),this.addShapeApi(e,t),r}addShapeApi(e,t){t.updateKeyShape=e=>(this.updateShape(t,Object.assign({index:0},e)),t),t.updateIcon=e=>{this.updateShape(t,Object.assign({index:1},e))},t.updateText=e=>{this.updateShape(t,Object.assign({index:2},e))}}drawIcon(e,t){const{r:n=20}=e;t.addShape("image",{attrs:Object.assign(Object.assign({},o.default.default),{img:e.icon,x:n-(e.iconWidth||20)/2,y:n-(e.iconHeight||20)/2,width:e.iconWidth||20,height:e.iconHeight||20}),name:"circle-image",capture:!0,draggable:!0})}drawText(e,t){const{text:n,style:a={},r:i=20}=e,{textStyle:o={}}=a;t.addShape("text",{attrs:Object.assign({text:n||"",x:i,y:2*i+8,textAlign:"center",textBaseline:"middle",fill:"#666",fontSize:10},o)})}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(1)),o=a(n(2));class r extends i.default{constructor(e,t=!0){super(e,!0),this.name="max-trigon-node",t&&this.register()}drawKeyShape(e,t){this.size.width,this.size.height;const{style:n={}}=e,{sideLength:a=100,position:i="top"}=n,r=.8*a,s=.5*a,d={right:[[0,0],[0,a],[r,s]],bottom:[[0,0],[a,0],[s,r]],top:[[s,0],[0,r],[a,r]],left:[[0,s],[r,0],[r,a]]},l=Object.assign(Object.assign(Object.assign({},o.default.default),{points:d[i],fill:"#0577BB",stroke:"#028080"}),n),c=t.addShape("polygon",{attrs:l,name:"max-trigon-node",className:"max-trigon-node"});return this.initAnchor(t,e),this.drawIcon(e,t),c}drawIcon(e,t){const{style:{sideLength:n=100,position:a="top"}}=e,i=e.iconWidth||20,r=e.iconHeight||20,s={top:{x:0,y:0},right:{x:-10,y:0},bottom:{x:0,y:-20},left:{x:0,y:0}}[a],d=n/2-i/2+s.x,l=n/2-r/2+s.y;t.addShape("image",{attrs:Object.assign(Object.assign({},o.default.default),{img:e.icon,x:d,y:l,width:i,height:r}),name:"circle-image",capture:!0,draggable:!0})}getAnchorPoints(e){const{style:{sideLength:t=100,position:n="top"}}=e;return"top"===n||"bottom"===n?[[.5,0],[.75,.5],[.5,1],[.25,.5]]:[[.5,.25],[1,.5],[.5,.75],[0,.5]]}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(1)),o=a(n(2));class r extends i.default{constructor(e,t=!0){super(e,!0),this.name="max-diamond-node",t&&this.register()}drawKeyShape(e,t){const{style:n={},sideLength:a=50}=e,i=a/2,r=Object.assign(Object.assign(Object.assign({},o.default.default),{path:[["M",i,0],["L",0,i],["L",i,a],["L",a,i],["Z"]],fill:"#0577BB",stroke:"#028080"}),n),s=t.addShape("path",{attrs:r,name:"max-diamond-node",className:"max-diamond-node"});return this.initAnchor(t,e),this.drawIcon(e,t),this.drawText(e,t),this.addShapeApi(e,t),s}addShapeApi(e,t){t.updateKeyShape=e=>(this.updateShape(t,Object.assign({index:0},e)),t),t.updateIcon=e=>{this.updateShape(t,Object.assign({index:1},e))},t.updateText=e=>{this.updateShape(t,Object.assign({index:2},e))}}drawIcon(e,t){const{style:{position:n="top"},sideLength:a=50}=e,i=e.iconWidth||20,r=e.iconHeight||20,s=a/2-i/2,d=a/2-r/2;t.addShape("image",{attrs:Object.assign(Object.assign({},o.default.default),{img:e.icon,x:s,y:d,width:i,height:r}),name:"circle-image",capture:!0,draggable:!0})}drawText(e,t){const{style:n={},sideLength:a=50}=e,{textStyle:i={}}=n;e.text&&t.addShape("text",{attrs:Object.assign({x:a/2,y:a+8,textAlign:"center",textBaseline:"middle",text:e.text,fill:"#666",fontSize:10},i),draggable:!0,name:"zhao"})}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(1)),o={B:"#5B8FF9",R:"#F46649",Y:"#EEBC20",G:"#5BD8A6",DI:"#A7A7A7"},r={hoverNode:function(e,t){const n=e.getContainer();t?n.showAnchor():n.clearAnchor()},selectNode:function(e,t){const n=e.getContainer().getChildByIndex(0);t?n.attr("opacity",1):n.attr("opacity",.6)},visibleNode:function(e,t){e.get("group");const n=e.getModel();if("hide"===t){const t=n.startPos,a=n.endPos,i=Math.abs(a.x-t.x),o=Math.abs(a.Y-t.Y);let r=.02*i,s=.02*o,d=n.startPos.x,l=n.startPos.x,c=setInterval(()=>{d<a.x&&clearInterval(c),e.update({x:d-=r,y:l-=s})},20)}},collapse:function(e,t){const n=e.getContainer().find(e=>"collapse-text"===e.get("name"));n&&(t?n.attr({text:"+"}):n.attr({text:"-"}))}};class s extends i.default{constructor(e){super(e,!0),this.name="tree-node",this.extendedName="rect",this.register()}draw(e,t,n){const{name:a="",variableName:i,variableValue:r,variableUp:s,label:d,collapsed:l,currency:c,status:h,rate:u,width:f=202,height:g=60}=e,p={width:f,height:g,lineWidth:1,fontSize:12,fill:"#fff",radius:4,stroke:"#CED4D9",opacity:1},m=0,x=0,y={textAlign:"left",textBaseline:"bottom"},b=t.addShape("rect",{attrs:Object.assign({x:m,y:x},p)}),w=b.getBBox();t.addShape("text",{attrs:Object.assign({x:12+m,y:20+x,text:a.length>28?a.substr(0,28)+"...":a,fontSize:12,opacity:.85,fill:"#000",cursor:"pointer"},y),name:"name-shape"});const v=t.addShape("text",{attrs:Object.assign(Object.assign({},y),{x:12+m,y:w.maxY-12,text:d,fontSize:16,fill:"#000",opacity:.85})});t.addShape("text",{attrs:Object.assign(Object.assign({},y),{x:v.getBBox().maxX+5,y:w.maxY-12,text:c,fontSize:12,fill:"#000",opacity:.75})});const _=t.addShape("text",{attrs:Object.assign(Object.assign({},y),{x:w.maxX-8,y:w.maxY-12,text:(100*(r||0)).toFixed(2)+"%",fontSize:12,textAlign:"right",fill:o[h]})}),S=s?"triangle":"triangle-down",O=t.addShape("marker",{attrs:Object.assign(Object.assign({},y),{x:_.getBBox().minX-10,y:w.maxY-12-6,symbol:S,r:6,fill:o[h]})});t.addShape("text",{attrs:Object.assign(Object.assign({},y),{x:O.getBBox().minX-4,y:w.maxY-12,text:i,fontSize:12,textAlign:"right",fill:"#000",opacity:.45})});t.addShape("rect",{attrs:{x:m,y:w.maxY-4,width:p.width,height:4,radius:[0,0,p.radius,p.radius],fill:"#E0DFE3"}}),t.addShape("rect",{attrs:{x:m,y:w.maxY-4,width:u*w.width,height:4,radius:[0,0,0,p.radius],fill:o[h]}});return e.children&&e.children.length&&(t.addShape("rect",{attrs:{x:p.width+8,y:p.height/2-8,width:16,height:16,stroke:"rgba(0, 0, 0, 0.25)",cursor:"pointer",fill:"#fff"},name:"collapse-back",modelId:e.id}),t.addShape("text",{attrs:{x:p.width+16,y:p.height/2,textAlign:"center",textBaseline:"middle",text:l?"+":"-",fontSize:16,cursor:"pointer",fill:"rgba(0, 0, 0, 0.25)"},name:"collapse-text",modelId:e.id})),this.initAnchor(t),b}getAnchorPoints(){return[[0,.5],[1,.5]]}setState(e,t,n){r[e]&&r[e].call(this,n,t)}}t.default=s},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(2));t.default=function(e){e.registerNode("circle-test-node",{drawKeyShape(e,t){this.size.width,this.size.height;const{style:n={}}=e,a=Object.assign(Object.assign(Object.assign({},i.default.base.origin),{fill:"#BB0552",r:50}),n);return t.addShape("circle",{attrs:a,name:"circle-test-node-1",className:"circle-test-node"})},getAnchorPoints:()=>[[.5,0],[1,.5],[.5,1]]},"simple-node")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(25);class i extends a.RegisterEdge{constructor(e){super(e),this.name="cvte-polyline1",this.extendedName="polyline",this.register()}draw(e,t){this.group=t;e.startPoint,e.endPoint;return t.addShape("path",{className:"edge-shape",attrs:{stroke:"#164979",lineWidth:1,lineAppendWidth:8,path:this.computePath(e),endArrow:{path:"M 0,0 L 6,-2 Q 5 0,6 2 Z",lineDash:[0,0],fill:"#164979"}},name:"edge-shape"})}computePath(e){const t=e.startPoint,n=e.endPoint,a=this.getControlPoints(e);let i=[t];return a&&(i=i.concat(a)),i.push(n),this.getPath(i)}getControlPoints(e){if(!e.sourceNode)return e.controlPoints;let t={sNode:e.sourceNode,tNode:e.targetNode,sPort:e.startPoint,tPort:e.endPoint,offset:15};return this.polylineFinding(t)}polylineFinding({sNode:e,tNode:t,sPort:n,tPort:a,offset:i}){const o=e&&e.getBBox()?e.getBBox():this.getPointBBox(n),r=t&&t.getBBox()?t.getBBox():this.getPointBBox(a),s=this.getExpandedBBox(o,i),d=this.getExpandedBBox(r,i),l=this.getExpandedPort(s,n),c=this.getExpandedPort(d,a);let h=this.getConnectablePoints(s,d,l,c);h=this.filterConnectablePoints(h,s),h=this.filterConnectablePoints(h,d);return this.AStar(h,l,c,s,d)}getPointBBox(e){return{centerX:e.x,centerY:e.y,minX:e.x,minY:e.y,maxX:e.x,maxY:e.y,height:0,width:0}}getExpandedBBox(e,t){return 0===e.width&&0===e.height?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}}getExpandedPort(e,t){return Math.abs(t.x-e.centerX)/e.width>Math.abs(t.y-e.centerY)/e.height?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}}getConnectablePoints(e,t,n,a){const i=this.getBBoxFromVertexes(n,a),o=this.combineBBoxes(e,t),r=this.combineBBoxes(e,i),s=this.combineBBoxes(t,i);let d=[];d=d.concat(this.vertexOfBBox(r),this.vertexOfBBox(s),this.vertexOfBBox(o));const l={x:o.centerX,y:o.centerY};return[o,r,s,i].forEach(e=>{d=d.concat(this.crossPointsByLineAndBBox(e,l))}),d.push({x:n.x,y:a.y}),d.push({x:a.x,y:n.y}),d}combineBBoxes(e,t){const n=Math.min(e.minX,t.minX),a=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+i)/2,centerY:(a+o)/2,minX:n,minY:a,maxX:i,maxY:o,height:o-a,width:i-n}}vertexOfBBox(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]}crossPointsByLineAndBBox(e,t){let n=[];return t.x<e.minX||t.x>e.maxX||(n=n.concat([{x:t.x,y:e.minY},{x:t.x,y:e.maxY}])),t.y<e.minY||t.y>e.maxY||(n=n.concat([{x:e.minX,y:t.y},{x:e.maxX,y:t.y}])),n}getBBoxFromVertexes(e,t){const n=Math.min(e.x,t.x),a=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y);return{centerX:(n+a)/2,centerY:(i+o)/2,maxX:a,maxY:o,minX:n,minY:i,height:o-i,width:a-n}}filterConnectablePoints(e,t){return e.filter(e=>e.x<=t.minX||e.x>=t.maxX||e.y<=t.minY||e.y>=t.maxY)}AStar(e,t,n,a,i){const o=[t],r=[];let s;for((e=((e,t)=>{const n=[];return e.forEach(e=>{n.find(n=>n[t]===e[t])||n.push(e)}),n})(this.fillId(e),"id")).push(n);o.length>0;){let t;if(o.forEach((e,n)=>{e.parent||(e.f=0),t||(t=e),e.f<t.f&&(t=e)}),t.x===n.x&&t.y===n.y){s=t;break}o.splice(o.findIndex(e=>e.x===t.x&&e.y===t.y),1),r.push(t);e.filter(e=>!(e.x!==t.x&&e.y!==t.y||e.x===t.x&&e.y===t.y||this.crossBBox([a,i],t,e))).forEach(e=>{const a=o.find(t=>t.x===e.x&&t.y===e.y),s=this.getCost(e,t);if(r.find(t=>t.x===e.x&&t.y===e.y));else if(a)e.g>s&&(e.parent=t,e.g=s,e.f=e.g+e.h);else{e.parent=t,e.g=s;let a=this.getCost(e,n);this.crossBBox([i],e,n)&&(a+=i.width/2+i.height/2),e.h=a,e.f=e.g+e.h,o.push(e)}})}if(s){const e=[];for(e.push({x:s.x,y:s.y});s.parent;)s=s.parent,e.push({x:s.x,y:s.y});return e.reverse()}return[]}fillId(e){return e.forEach(e=>{e.id=e.x+"-"+e.y}),e}crossBBox(e,t,n){for(let a=0;a<e.length;a++){const i=e[a];if(t.x===n.x&&i.minX<t.x&&i.maxX>t.x){if(t.y<i.maxY&&n.y>=i.maxY||n.y<i.maxY&&t.y>=i.maxY)return!0}else if(t.y===n.y&&i.minY<t.y&&i.maxY>t.y&&(t.x<i.maxX&&n.x>=i.maxX||n.x<i.maxX&&t.x>=i.maxX))return!0}return!1}getCost(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}getPath(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n];if(0===n)t.push(["M",a.x,a.y]);else if(n===e.length-1)t.push(["L",a.x,a.y]);else{const i=e[n-1];let o=e[n+1],r=5;(Math.abs(a.y-i.y)>r||Math.abs(a.x-i.x)>r)&&(i.x===a.x?t.push(["L",a.x,a.y>i.y?a.y-r:a.y+r]):i.y===a.y&&t.push(["L",a.x>i.x?a.x-r:a.x+r,a.y]));const s=Math.abs(a.y-o.y),d=Math.abs(a.x-o.x);s>0&&s<r?r=s:d>0&&d<r&&(r=d),i.x!==o.x&&o.x===a.x?t.push(["Q",a.x,a.y,a.x,a.y>o.y?a.y-r:a.y+r]):i.y!==o.y&&o.y===a.y&&t.push(["Q",a.x,a.y,a.x>o.x?a.x-r:a.x+r,a.y])}}return t}}t.default=i},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterEdge=void 0;const i=a(n(6));class o extends i.default{constructor(e){super(e),this.name="cvte-polyline",this.extendedName="polyline"}register(){const e=this;this.G6.registerEdge(this.name,{drawShape:function(t,n){return e.draw.call(e,t,n,this)},afterDraw:function(t,n){return e.afterDraw.call(e,t,n,this)},update:function(t,n){e.update.call(e,t,n,this)},afterUpdate:function(t,n){e.afterUpdate.call(e,t,n,this)},setState:function(t,n,a){e.setState.call(e,t,n,a,this)}},"polyline")}draw(e,t,n){}update(e,t,n){}afterUpdate(e,t,n){}afterDraw(e,t,n){}setState(e,t,n,a){}}t.RegisterEdge=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={hoverEdge:function(e,t){const n=e.getContainer().getChildByIndex(0);t?n.attr("stroke","#60A1DE"):n.attr("stroke","#164979")},selectEdge:function(e,t){const n=e.getContainer().getChildByIndex(0);t?n.attr({opacity:1,lineWidth:2}):n.attr({opacity:.6,lineWidth:1})}};t.default=function(e){e.registerEdge("cvte-polyline",{drawShape(e,t){this.group=t,this.label=null;e.startPoint,e.endPoint;return t.addShape("path",{className:"edge-shape",attrs:{stroke:"#164979",lineWidth:1,lineAppendWidth:8,path:this.computePath(e),opacity:.6,endArrow:{path:"M 0,0 L 6,-2 Q 5 0,6 2 Z",lineDash:[0,0],fill:"#164979"}},name:"edge-shape"})},computePath(e){const t=e.startPoint,n=e.endPoint,a=this.getControlPoints(e);let i=[t];return a&&(i=i.concat(a)),i.push(n),this.getPath(i)},drawLabel(e,t){const n=e.labelCfg||{},a=this.getLabelStyle(e,n,t),i=t.addShape("text",{attrs:Object.assign({},a)}),o=i.getBBox();return t.addShape("rect",{attrs:{x:o.x-2,y:o.y-2,width:o.width+4,height:o.height+4,fill:"#fff",stroke:"#fff"},name:"edge-labelRect",className:"edge-labelRect"}),t.toBack(),i.toFront(),i},afterUpdate(e,t){const n=t.getContainer().findByClassName("edge-label"),a=t.getContainer().findByClassName("edge-labelRect");if(n){const e=n.getBBox();a.attr({x:e.x-2,y:e.y-2,width:e.width+4,height:e.height+4})}},getControlPoints(e){if(!e.sourceNode)return e.controlPoints;let t={sNode:e.sourceNode,tNode:e.targetNode,sPort:e.startPoint,tPort:e.endPoint,offset:15};return this.polylineFinding(t)},polylineFinding({sNode:e,tNode:t,sPort:n,tPort:a,offset:i}){const o=e&&e.getBBox()?e.getBBox():this.getPointBBox(n),r=t&&t.getBBox()?t.getBBox():this.getPointBBox(a),s=this.getExpandedBBox(o,i),d=this.getExpandedBBox(r,i),l=this.getExpandedPort(s,n),c=this.getExpandedPort(d,a);let h=this.getConnectablePoints(s,d,l,c);h=this.filterConnectablePoints(h,s),h=this.filterConnectablePoints(h,d);return this.AStar(h,l,c,s,d)},getPointBBox:e=>({centerX:e.x,centerY:e.y,minX:e.x,minY:e.y,maxX:e.x,maxY:e.y,height:0,width:0}),getExpandedBBox:(e,t)=>0===e.width&&0===e.height?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t},getExpandedPort:(e,t)=>Math.abs(t.x-e.centerX)/e.width>Math.abs(t.y-e.centerY)/e.height?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY},getConnectablePoints(e,t,n,a){const i=this.getBBoxFromVertexes(n,a),o=this.combineBBoxes(e,t),r=this.combineBBoxes(e,i),s=this.combineBBoxes(t,i);let d=[];d=d.concat(this.vertexOfBBox(r),this.vertexOfBBox(s),this.vertexOfBBox(o));const l={x:o.centerX,y:o.centerY};return[o,r,s,i].forEach(e=>{d=d.concat(this.crossPointsByLineAndBBox(e,l))}),d.push({x:n.x,y:a.y}),d.push({x:a.x,y:n.y}),d},combineBBoxes(e,t){const n=Math.min(e.minX,t.minX),a=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+i)/2,centerY:(a+o)/2,minX:n,minY:a,maxX:i,maxY:o,height:o-a,width:i-n}},vertexOfBBox:e=>[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}],crossPointsByLineAndBBox(e,t){let n=[];return t.x<e.minX||t.x>e.maxX||(n=n.concat([{x:t.x,y:e.minY},{x:t.x,y:e.maxY}])),t.y<e.minY||t.y>e.maxY||(n=n.concat([{x:e.minX,y:t.y},{x:e.maxX,y:t.y}])),n},getBBoxFromVertexes(e,t){const n=Math.min(e.x,t.x),a=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y);return{centerX:(n+a)/2,centerY:(i+o)/2,maxX:a,maxY:o,minX:n,minY:i,height:o-i,width:a-n}},filterConnectablePoints:(e,t)=>e.filter(e=>e.x<=t.minX||e.x>=t.maxX||e.y<=t.minY||e.y>=t.maxY),AStar(e,t,n,a,i){const o=[t],r=[];let s;for((e=((e,t)=>{const n=[];return e.forEach(e=>{n.find(n=>n[t]===e[t])||n.push(e)}),n})(this.fillId(e),"id")).push(n);o.length>0;){let t;if(o.forEach((e,n)=>{e.parent||(e.f=0),t||(t=e),e.f<t.f&&(t=e)}),t.x===n.x&&t.y===n.y){s=t;break}const d=o.findIndex(e=>e.x===t.x&&e.y===t.y);o.splice(-1===d?0:d,1),r.push(t);e.filter(e=>!(e.x!==t.x&&e.y!==t.y||e.x===t.x&&e.y===t.y||this.crossBBox([a,i],t,e))).forEach(e=>{const a=o.find(t=>t.x===e.x&&t.y===e.y),s=this.getCost(e,t);if(r.find(t=>t.x===e.x&&t.y===e.y));else if(a)e.g>s&&(e.parent=t,e.g=s,e.f=e.g+e.h);else{e.parent=t,e.g=s;let a=this.getCost(e,n);this.crossBBox([i],e,n)&&(a+=i.width/2+i.height/2),e.h=a,e.f=e.g+e.h,o.push(e)}})}if(s){const e=[];for(e.push({x:s.x,y:s.y});s.parent;)s=s.parent,e.push({x:s.x,y:s.y});return e.reverse()}return[]},fillId:e=>(e.forEach(e=>{e.id=e.x+"-"+e.y}),e),crossBBox(e,t,n){for(let a=0;a<e.length;a++){const i=e[a];if(t.x===n.x&&i.minX<t.x&&i.maxX>t.x){if(t.y<i.maxY&&n.y>=i.maxY||n.y<i.maxY&&t.y>=i.maxY)return!0}else if(t.y===n.y&&i.minY<t.y&&i.maxY>t.y&&(t.x<i.maxX&&n.x>=i.maxX||n.x<i.maxX&&t.x>=i.maxX))return!0}return!1},getCost:(e,t)=>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),getPath(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n];if(0===n)t.push(["M",a.x,a.y]);else if(n===e.length-1)t.push(["L",a.x,a.y]);else{const i=e[n-1];let o=e[n+1],r=5;(Math.abs(a.y-i.y)>r||Math.abs(a.x-i.x)>r)&&(i.x===a.x?t.push(["L",a.x,a.y>i.y?a.y-r:a.y+r]):i.y===a.y&&t.push(["L",a.x>i.x?a.x-r:a.x+r,a.y]));const s=Math.abs(a.y-o.y),d=Math.abs(a.x-o.x);s>0&&s<r?r=s:d>0&&d<r&&(r=d),i.x!==o.x&&o.x===a.x?t.push(["Q",a.x,a.y,a.x,a.y>o.y?a.y-r:a.y+r]):i.y!==o.y&&o.y===a.y&&t.push(["Q",a.x,a.y,a.x>o.x?a.x-r:a.x+r,a.y])}}return t},setState(e,t,n){a[e]&&a[e].call(this,n,t)}},"polyline")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerEdge("cover-cricle",{draw(e,t){let n=e.startPoint,a=e.endPoint,i={x:(n.x+a.x)/2,y:(n.y+a.y)/2},o={x:(n.x+i.x)/2,y:n.y};return t.addShape("path",{attrs:{path:[["M",n.x,n.y],["Q",o.x+8,o.y,i.x,i.y],["T",a.x-8,a.y],["L",a.x,a.y]],stroke:"#ccc",lineWidth:1.6,endArrow:{path:"M 12,4 L 4,0 L 12,-4 Z",d:4,fill:"#fff"}}})}})}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(29),o=a(n(30)),r=a(n(6));class s extends r.default{constructor(e){super(e),this.register()}register(){o.default.registerFactory("anchor",{defaultShapeType:"marker",getShape:e=>Object.assign({},i.shapeBase,{type:"marker",itemType:e,drawShape(e,t){const n=this.getShapeStyle(e);return t.addShape("marker",{attrs:n,name:"anchor-shape",draggable:!0})},setState(e,t,n){"anchor-active"===e&&t&&this.update({style:{fill:"#1990FF",r:5}},n),"hoverAnchor"===e&&(t?this.update({style:{fill:"#AEA1FF"}},n):this.update({style:{fill:"#FFF"}},n))}})})}}t.default=s},function(e,t){e.exports=require("@antv/g6-core/lib/element/shapeBase")},function(e,t){e.exports=require("@antv/g6-core/lib/element/shape")},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(32)),o=a(n(33)),r=a(n(34)),s=a(n(35)),d=a(n(36)),l=a(n(37)),c=a(n(38)),h=a(n(39)),u=a(n(40));t.default=[i.default,o.default,r.default,s.default,d.default,l.default,c.default,h.default,u.default]},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={onNodeMouseEnter(e){this.graph.setItemState(e.item,"hoverNode",!0)},onNodeMouseLeave(e){"anchor-shape"!==e.target.cfg.name&&this.graph.setItemState(e.item,"hoverNode",!1)}};class r extends i.default{constructor(e){super(e),this.name="cover-hover-node",this.register(o)}getEvents(){return{"node:mouseenter":"onNodeMouseEnter","node:mouseleave":"onNodeMouseLeave"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={onNodeMouseEnter(e){this.graph.setItemState(e.item,"hoverNode",!0)},onAnchorMouseLeave(e){const t=e.item.getContainer().getParent();this.graph.setItemState(e.item,"hoverAnchor",!1),t&&this.graph.setItemState(t.get("item"),"hoverNode",!1)},onAnchorMouseEnter(e){this.graph.setItemState(e.item,"hoverAnchor",!0)}};class r extends i.default{constructor(e){super(e),this.name="cover-hover-anchor",this.register(o)}getEvents(){return{"anchor:mouseleave":"onAnchorMouseLeave","anchor:mouseenter":"onAnchorMouseEnter"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={origin:null,target:null,onNodeDragStart(e){this.target=e.item,this.origin={x:e.x,y:e.y}},onNodeDrag(e){if(!this.origin)return;const t=this.target.get("model"),n=this.origin;this.point||(this.point={x:t.x,y:t.y});const a=e.x-n.x+this.point.x,i=e.y-n.y+this.point.y;this.origin={x:e.x,y:e.y},this.point={x:a,y:i},this.moveDelegate(this.target,a,i)},onNodeDragEnd(e){if(!this.origin)return;const t=e.item.get("delegateShape"),n=t.getBBox(),a=n.x+3,i=n.y+3;t.remove(),this.target.set("delegateShape",null),this.graph.updateItem(this.target,{x:a,y:i});const o=this.graph.get("MacroCommand");o&&o.executeCommand("docat",{graph:this.graph}),this.point=null,this.origin=null,this.graph.emit("afternodedragend")},moveDelegate(e,t,n){let a=e.get("delegateShape");const i=e.get("keyShape").getBBox(),o=e.getKeyShape().attr();if(!a){const r=this.graph.get("group"),s={stroke:o.stroke?o.stroke:"#1890FF",fill:o.fill?o.fill:"#1890FF",fillOpacity:.08,lineDash:[4,4],radius:4,lineWidth:1};let d={};o.r&&(d.radius=i.width/2),a=r.addShape("rect",{attrs:Object.assign(Object.assign({width:i.width,height:i.height,x:t-i.width/2,y:n-i.height/2,nodeId:e.get("id")},s),d)}),e.set("delegateShape",a)}a.attr({x:t,y:n}),this.graph.paint(),this.graph.emit("afternodedrag",a)}};class r extends i.default{constructor(e){super(e),this.name="cover-drag-node",this.register(o)}getEvents(){return{"node:dragstart":"onNodeDragStart","node:drag":"onNodeDrag","node:dragend":"onNodeDragEnd"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={originInfo:null,target:null,isSameNode(e){return e.target.getParent()&&e.target.getParent().getParent()&&e.target.getParent().getParent().get("item")===this.originInfo.sourceNode},onDragLeave(e){this.originInfo&&(e.item.setHotspotActived(!1),this.originInfo.targetNode=null,this.originInfo.targetAnchor=null)},onDragEnter(e){this.originInfo&&(e.item.setHotspotActived(!0),this.isSameNode(e)||(this.originInfo.targetNode=e.target.getParent().getParent().get("item"),this.originInfo.targetAnchor=e.item.get("index")))},onDrag(e){this._updateEdgeDelegate(this.target,e.x,e.y)},_updateEdgeDelegate(e,t,n){let a=e.get("edgeDelegate");if(!a){a=this.graph.get("group").addShape("line",{attrs:{x1:this.originInfo.x,y1:this.originInfo.y,x2:t,y2:n,stroke:"#1890FF",lineDash:[4,4],lineWidth:1}}),a.set("capture",!1),e.set("edgeDelegate",a)}a.attr({x2:t,y2:n}),this.graph.paint()},onDragStart(e){const t=e.item.get("index"),n=e.target.getParent().getParent().get("item"),a=n.get("model"),i=n.getAnchorPoints(a)[t];this.originInfo={x:i.x,y:i.y,sourceNode:n,sourceAnchor:t},this.showAllAnchor(),this.graph.set("edgeDragging",!0),this.target=e.item},onDragEnd(e){this.clearAllAnchor();const t=e.item.get("edgeDelegate");t&&t.remove();if(!this.graph.get("edgeEndCallback")(this.originInfo.sourceNode,this.originInfo.targetNode))return;this.originInfo.targetNode&&this.graph.add("edge",{source:this.originInfo.sourceNode.get("id"),target:this.originInfo.targetNode.get("id"),sourceAnchor:this.originInfo.sourceAnchor,targetAnchor:this.originInfo.targetAnchor,type:"cvte-polyline"}),this.graph.setItemState(this.originInfo.sourceNode,"hoverNode",!1),this.graph.emit("onDargEdgeEnd",{sourceNode:this.originInfo.sourceNode,targetNode:this.originInfo.targetNode});const n=this.graph.get("MacroCommand");n&&n.executeCommand("docat",{graph:this.graph})},clearAllAnchor(){this.graph.getNodes().forEach(e=>{e.getContainer().clearAnchor()}),this.graph.setItemState(this.originInfo.sourceNode,"hover",!1)},showAllAnchor(e){const t=this.graph.getNodes();this.originInfo.sourceNode.getModel().groupId;t.forEach(e=>{const t=e.getContainer();this.originInfo.sourceNode!==e?(t.showAnchor(),t.anchorShapes.forEach(e=>e.get("item").showHotpot())):t.anchorShapes.forEach(e=>{e.get("item").showHotpot();e.get("item").get("index")===this.originInfo.sourceAnchor&&this.graph.setItemState(e.get("item"),"anchor-active",!0)})})}};class r extends i.default{constructor(e){super(e),this.name="cover-drag-anchor",this.register(o)}getEvents(){return{"anchor:dragstart":"onDragStart","anchor:dragend":"onDragEnd","anchor:dragenter":"onDragEnter","anchor:dragleave":"onDragLeave","anchor:drag":"onDrag"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={onNodeClick(e){this.clearAllSelected(),this.graph.setItemState(e.item,"selectNode",!0),this.graph.set("selectedItem",e.item);const t=e.item.get("group");this.graph.emit("onSelectNode",e.item,t),this.graph.set("noKeyDown",!1)},onEdgeClick(e){this.clearAllSelected(),this.graph.setItemState(e.item,"selectEdge",!0),this.graph.set("selectedItem",e.item),this.graph.set("noKeyDown",!1);const t=e.item.get("group");this.graph.emit("onSelectedEdge",e.item,t)},onCanvasClick(e){this.graph.set("noKeyDown",!1),this.clearAllSelected()},clearAllSelected(){let e=this.graph.findAllByState("node","selectNode");this.graph.set("selectedItem",null);let t=this.graph.findAllByState("edge","selectEdge");e.forEach(e=>{this.graph.setItemState(e,"selectNode",!1)}),t.forEach(e=>{this.graph.setItemState(e,"selectEdge",!1)}),this.graph.emit("onClearSelectNode",null)},onNodeDoubleClick(e){this.graph.setItemState(e.item,"selectNode",!0),this.graph.set("selectedItem",e.item),this.graph.emit("onDoubleClickNode",e.item),this.graph.set("noKeyDown",!1)},onEdgeDoubleClick(e){this.clearAllSelected(),this.graph.setItemState(e.item,"selectEdge",!0),this.graph.set("selectedItem",e.item),this.graph.set("noKeyDown",!1);const t=e.item.get("group");this.graph.emit("onDoubleClickEdge",e.item,t)}};class r extends i.default{constructor(e){super(e),this.name="cover-select-node",this.register(o)}getEvents(){return{"node:click":"onNodeClick","canvas:click":"onCanvasClick","edge:click":"onEdgeClick","node:dblclick":"onNodeDoubleClick","edge:dblclick":"onEdgeDoubleClick"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={onEdgeMouseEnter(e){this.graph.setItemState(e.item,"hoverEdge",!0)},onEdgeMouseLeave(e){this.graph.setItemState(e.item,"hoverEdge",!1)}};class r extends i.default{constructor(e){super(e),this.name="cover-hover-edge",this.register(o)}getEvents(){return{"edge:mouseenter":"onEdgeMouseEnter","edge:mouseleave":"onEdgeMouseLeave"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={onKeyDown(e){const t=this.graph.get("selectedItem");if(!this.graph.get("noKeyDown")&&8===e.keyCode&&t){const e=this.graph.get("MacroCommand");e?e.executeCommand("delete",{graph:this.graph}):(this.graph.remove(t),this.graph.set("selectedItem",null))}}};class r extends i.default{constructor(e){super(e),this.name="cover-delete-item",this.register(o)}getEvents(){return{keydown:"onKeyDown"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(0)),o={onMouseUp(e){if(!this.graph.get("addNodeDragging"))return;const t=this.graph.get("addNodeModel"),n=this.graph.getPointByClient(e.clientX,e.clientY),a=n.x-t.offsetX,i=n.y-t.offsetY,o=(new Date).getTime(),r=Object.assign({type:t.nodeType,id:""+o,x:a,y:i,style:Object.assign({},t)},t.model);this.graph.addItem("node",r),this.graph.paint(),this.graph.emit("onAddPanelNode",r);const s=this.graph.get("MacroCommand");s&&s.executeCommand("docat",{graph:this.graph})}};class r extends i.default{constructor(e){super(e),this.name="cover-add-node",this.register(o)}getEvents(){return{"canvas:mouseup":"onMouseUp"}}}t.default=r},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(41),r=a(n(0)),s={onDrag(e){this._clearAlignLine(),this._itemAlign(e)},onDragEnd(){this._clearAlignLine()},getDefaultCfg:()=>({alignLineStyle:{stroke:"#540000",lineWidth:1},tolerance:4,_alignLines:[]}),_itemAlign(e){const t=e.getBBox(),n={x:t.x+t.width/2,y:t.y},a={x:t.x+t.width/2,y:t.y+t.height/2},o={x:t.x+t.width/2,y:t.y+t.height},r={x:t.x,y:t.y+t.height/2},s={x:t.x+t.width,y:t.y+t.height/2},d=e._attrs&&e._attrs.nodeId?this.graph.getNodes().filter(t=>t.get("id")!==e._attrs.nodeId):this.graph.getNodes();i.each(d,d=>{const l=[],c=[];let h=null;const u=d.getBBox();if(i.each(this.getHorizontalLines(u),e=>{l.push(this.getDistance(e,n)),l.push(this.getDistance(e,a)),l.push(this.getDistance(e,o))}),i.each(this.getVerticalLines(u),e=>{c.push(this.getDistance(e,r)),c.push(this.getDistance(e,a)),c.push(this.getDistance(e,s))}),l.sort((e,t)=>e.dis-t.dis),c.sort((e,t)=>e.dis-t.dis),l.length>0&&l[0].dis<this.tolerance){e.attr({y:l[0].line[1]-l[0].point.y+t.y}),h={horizontals:[l[0]]};for(let e=1;e<3;e++)l[0].dis===l[e].dis&&h.horizontals.push(l[e])}if(c.length>0&&c[0].dis<this.tolerance){e.attr({x:c[0].line[0]-c[0].point.x+t.x}),h?h.verticals=[c[0]]:h={verticals:[c[0]]};for(let e=1;e<3;e++)c[0].dis===c[e].dis&&h.verticals.push(c[e])}h&&(h.bbox=t,this._addAlignLine(h))})},_addAlignLine(e){const t=this.graph.get("group"),n=e.bbox,a=this.alignLineStyle,o=this._alignLines;e.horizontals&&i.each(e.horizontals,(function(e){const r=e.line,s=e.point,d=(r[0]+r[2])/2;let l,c;s.x<d?(l=s.x-n.width/2,c=Math.max(r[0],r[2])):(l=s.x+n.width/2,c=Math.min(r[0],r[2]));const h=t.addShape("line",{attrs:i.mix({x1:l,y1:r[1],x2:c,y2:r[1]},a),capture:!1});o.push(h)})),e.verticals&&i.each(e.verticals,(function(e){const r=e.line,s=e.point,d=(r[1]+r[3])/2;let l,c;s.y<d?(l=s.y-n.height/2,c=Math.max(r[1],r[3])):(l=s.y+n.height/2,c=Math.min(r[1],r[3]));const h=t.addShape("line",{attrs:i.mix({x1:r[0],y1:l,x2:r[0],y2:c},a),capture:!1});o.push(h)}))},getHorizontalLines:e=>[[e.minX,e.minY,e.maxX,e.minY],[e.minX,e.centerY,e.maxX,e.centerY],[e.minX,e.maxY,e.maxX,e.maxY]],getVerticalLines:e=>[[e.minX,e.minY,e.minX,e.maxY],[e.centerX,e.minY,e.centerX,e.maxY],[e.maxX,e.minY,e.maxX,e.maxY]],getDistance(e,t){return{line:e,point:t,dis:this.pointLineDistance(e[0],e[1],e[2],e[3],t.x,t.y)}},pointLineDistance:function(e,t,n,a,i,r){const s=[n-e,a-t];if(o.vec2.exactEquals(s,[0,0]))return NaN;let d=[-s[1],s[0]];return o.vec2.normalize(d,d),Math.abs(o.vec2.dot([i-e,r-t],d))},_clearAlignLine(){i.each(this._alignLines,e=>{e.remove()}),this._alignLines=[],this.graph.paint()}};class d extends r.default{constructor(e){super(e),this.name="cover-align-node",this.register(s)}getEvents(){return{afternodedrag:"onDrag",afternodedragend:"onDragEnd"}}}t.default=d},function(e,t){e.exports=require("@antv/matrix-util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layoutSetting=void 0;const a={type:"dagre",align:"DL",nodesep:20,ranksep:50,controlPoints:!0};t.layoutSetting={horizontal:Object.assign(Object.assign({},a),{rankdir:"LR"}),vertical:Object.assign(Object.assign({},a),{rankdir:"TB"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowUtil=void 0;t.FlowUtil=class{constructor(){this.debounce=(e,t)=>{let n=null;return()=>{n?(clearTimeout(n),n=setTimeout(e,t)):n=setTimeout(e,t)}},this.throttle=()=>{}}}},function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(4)),d=r(n(9)),l=r(n(45)),c=r(n(48)),h=r(n(52)),u=r(n(53)),f=r(n(54)),g=r(n(55));n(67);const p=200,m=48;class x{constructor(){this.autoSize=(e=window.innerHeight,t=window.innerWidth)=>({listWidth:p,listHeight:e-m,flowWidth:t-p,flowHeight:e-m}),this.debounce=(e,t)=>{let n=null;return()=>{n?(clearTimeout(n),n=setTimeout(e,t)):n=setTimeout(e,t)}},this.throttle=()=>{}}}class y extends s.Component{constructor(){super(...arguments),this.toolBar=s.default.createRef(),this.xiooFlow=s.default.createRef(),this.util=new x,this.workflowContainer=s.default.createRef(),this.nodePanelContainer=s.default.createRef(),this.workflowInstance=null,this.state={size:{listWidth:0,listHeight:0,flowWidth:0,flowHeight:0}},this.initWorkflow=()=>{const{size:e}=this.state,{initEdges:t,initNodes:n,layout:a,returnGraph:i,animate:o,commandList:r,judgeEdgeEnd:s,registerNodeList:l=[],registerEdgeList:c=[],registerNodes:p=[],registerBehaviors:m=[],treeGroup:x,defaultEdge:y,defaultNode:b,modes:w,mode:v="edit"}=this.props,_=[new u.default];if(this.nodePanelContainer.current){const e=new h.default({container:this.nodePanelContainer.current});_.push(e)}if(this.toolBar.current){const e=new f.default({container:this.toolBar.current});_.push(e)}const S=new d.default({container:this.workflowContainer.current,width:e.flowWidth,height:e.flowHeight,plugins:_,layout:a,initNodes:n,initEdges:t,registerNodes:p,animate:o,registerEdgeList:c,registerBehaviors:m,edgeCallback:s,treeGroup:x,defaultEdge:y,defaultNode:b,modes:w});S.graph.setMode(v),S.graph.on("onDoubleClickNode",e=>{}),S.graph.on("onDargEdgeEnd",e=>{console.log(e)}),this.workflowInstance=S,this.registerListener(),i&&i(this.workflowInstance),g.default(r)},this.registerListener=()=>{const{listeners:e}=this.props;Object.keys(e).forEach(t=>{this.workflowInstance.graph.on(t,e[t])})},this.handleHeaderChange=e=>{}}componentDidMount(){new ResizeObserver(e=>{const{contentRect:{height:t,width:n}}=e[0];console.log(e),this.autoSize(t,n)}).observe(this.xiooFlow.current)}autoSize(e,t){const n=this.util.autoSize(e,t);this.setState({size:n},()=>{this.workflowInstance||this.initWorkflow()}),this.workflowInstance&&this.workflowInstance.graph.changeSize(n.flowWidth,n.flowHeight)}render(){const{mode:e="edit"}=this.props;return s.default.createElement("div",{className:"xioo-flow",id:"xioo-flow",ref:this.xiooFlow},this.props.ExtraElement,"edit"===e&&s.default.createElement("div",{className:"xioo-flow-header",ref:this.toolBar},s.default.createElement(l.default,{xiooFlow:this.xiooFlow},this.props.toolbar)),s.default.createElement("div",{className:"xioo-flow-body",style:{height:this.state.size.flowHeight}},"edit"===e&&s.default.createElement("div",{className:"xioo-flow-body-node",ref:this.nodePanelContainer,style:{width:this.state.size.listWidth}},s.default.createElement(c.default,{groupNodeList:this.props.groupNodeList})),s.default.createElement("div",{className:"xioo-flow-body-flow",ref:this.workflowContainer,style:{width:"edit"===e?this.state.size.flowWidth:this.state.size.flowWidth+p,height:"edit"===e?this.state.size.flowHeight:this.state.size.flowHeight+m}})))}}y.defaultProps={groupNodeList:[],initNodes:[],initEdges:[],listeners:{},animate:!1,commandList:[],registerBehaviors:[],treeGroup:!1},t.default=y},function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(4));n(46);class s extends r.Component{constructor(){super(...arguments),this.handleFullScreen=()=>{const e=this.props.xiooFlow.current,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;void 0!==t&&t&&t.call(e)}}render(){return r.default.createElement("div",{className:"xioo-work-header"},r.default.createElement("div",{className:"xioo-work-header-group"},r.default.createElement("div",{className:"xioo-work-header-group-icon","data-command":"undo"},r.default.createElement("span",{className:"operate fa fa-mail-reply"}),r.default.createElement("span",{className:"icon-text"},"撤销")),r.default.createElement("div",{className:"xioo-work-header-group-icon","data-command":"redo"},r.default.createElement("span",{className:"operate fa fa-mail-forward"}),r.default.createElement("span",{className:"icon-text"},"恢复"))),r.default.createElement("div",{className:"xioo-work-header-group"},r.default.createElement("div",{className:"xioo-work-header-group-icon","data-command":"copy"},r.default.createElement("span",{className:"operate fa fa-clone"}),r.default.createElement("span",{className:"icon-text"},"复制")),r.default.createElement("div",{className:"xioo-work-header-group-icon","data-command":"delete"},r.default.createElement("span",{className:"operate fa fa-trash-o"}),r.default.createElement("span",{className:"icon-text"},"删除"))),r.default.createElement("div",{className:"xioo-work-header-group"},r.default.createElement("div",{className:"xioo-work-header-group-icon actionable","data-command":"blow","data-params":""+JSON.stringify({value:.1})},r.default.createElement("span",{className:"operate fa fa-search-plus"}),r.default.createElement("span",{className:"icon-text"},"放大")),r.default.createElement("div",{className:"xioo-work-header-group-icon actionable","data-command":"blow","data-params":""+JSON.stringify({value:-.1})},r.default.createElement("span",{className:"operate fa fa-search-minus"}),r.default.createElement("span",{className:"icon-text"},"缩小")),r.default.createElement("div",{className:"xioo-work-header-group-icon actionable","data-command":"fitView"},r.default.createElement("span",{className:"operate fa fa-laptop"}),r.default.createElement("span",{className:"icon-text"},"适应画布")),r.default.createElement("div",{className:"xioo-work-header-group-icon actionable","data-command":"originSize"},r.default.createElement("span",{className:"operate fa fa-calendar-check-o"}),r.default.createElement("span",{className:"icon-text"},"实际大小")),r.default.createElement("div",{className:"xioo-work-header-group-icon actionable","data-command":"layout"},r.default.createElement("span",{className:"operate fa fa-cube"}),r.default.createElement("span",{className:"icon-text"},"重新布局"))),r.default.createElement("div",{className:"xioo-work-header-group"},r.default.createElement("div",{className:"xioo-work-header-group-icon actionable","data-command":"fullScreen","data-params":""+JSON.stringify({domId:"xioo-flow"})},r.default.createElement("span",{className:"operate fa fa-window-maximize"}),r.default.createElement("span",{className:"icon-text"},"全屏"))),r.default.Children.map(this.props.children,(e,t)=>{const n=e.props;return r.default.cloneElement(e,n)}))}}t.default=s},function(e,t,n){var a=n(7),i=n(47);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};a(i,o);e.exports=i.locals||{}},function(e,t,n){(t=n(8)(!1)).push([e.i,".xioo-work-header {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n.xioo-work-header .xioo-work-header-group {\n  display: flex;\n  padding: 0px 8px;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon {\n  width: 30px;\n  height: 30px;\n  border: 1px solid transparent;\n  transition: 0.3s;\n  border-radius: 2px;\n  margin: 0 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon.actionable .operate {\n  color: #404040;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon .icon-text {\n  display: none;\n  position: absolute;\n  font-size: 12px;\n  height: 20px;\n  width: 60px;\n  background: #1990FF;\n  border-radius: 4px;\n  justify-content: center;\n  align-items: center;\n  top: 35px;\n  color: #fff;\n  border: 1px solid #0184FF;\n  box-shadow: 0 2px 4px 1px #c0c0c0;\n  opacity: 0;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon .icon-text::before {\n  content: '';\n  border: 10px solid transparent;\n  border-bottom-color: #1990FF;\n  position: absolute;\n  height: 10px;\n  width: 10px;\n  top: -20px;\n  left: 0px;\n  right: 0px;\n  margin: auto;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon:hover {\n  border: 1px solid #f0f0f0;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon:hover .operate {\n  color: #1990FF;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon:hover .icon-text {\n  display: flex;\n  transition: 0.3s;\n  opacity: 1;\n}\n.xioo-work-header .xioo-work-header-group .xioo-work-header-group-icon .operate {\n  font-size: 18px;\n  color: #A2A2A2;\n  transition: 0.3s;\n}\n.xioo-work-header .xioo-work-header-group + .xioo-work-header-group {\n  border-left: 1px solid #f0f0f0;\n}\n",""]),e.exports=t},function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(4)),d=r(n(49));n(50);class l extends s.Component{constructor(){super(...arguments),this.state={panelVisible:{},nodePanelGroup:[]},this.initNodeData=()=>{const{panelVisible:e}=this.state,{groupNodeList:t}=this.props,n=t.map(t=>(e[t.groupKey]=!!t.defaultOpen&&t.defaultOpen,t.nodes=t.nodes.map(e=>{const t=Object.assign(Object.assign({},e.style||{}),{img:e.icon,text:e.text,thumbnail:e.thumbnail,position:e.position,nodeType:e.nodeType,model:e.model||{}});return e.attrs=t,e}),t));this.setState({nodePanelGroup:n,panelVisible:e})},this.handlePanelHeader=e=>{const{panelVisible:t}=this.state;t[e]=!t[e],this.setState({panelVisible:t})}}componentDidMount(){this.initNodeData()}get NodePanel(){const{nodePanelGroup:e=[]}=this.state;return e.map(e=>s.default.createElement("div",{className:"flow-group-panel",key:e.groupKey},s.default.createElement("div",{className:"flow-group-panel-header",onClick:()=>this.handlePanelHeader(e.groupKey)},s.default.createElement("div",{className:"flow-group-panel-header-title "+(this.state.panelVisible[e.groupKey]?"active":"")},s.default.createElement("div",{className:"flow-group-panel-header-icon"},s.default.createElement("span",{className:"fa "+e.groupIcon})),s.default.createElement("div",{className:"flow-group-panel-header-name"},e.groupName)),s.default.createElement("div",{className:"flow-group-panel-header-drop"},s.default.createElement("span",{className:"fa fa-chevron-right flow-drop-down "+(this.state.panelVisible[e.groupKey]?"active":"")}))),s.default.createElement("div",{className:"flow-group-panel-body "+(this.state.panelVisible[e.groupKey]?"active":"unactive"),style:{height:""+(this.state.panelVisible[e.groupKey]?84*e.nodes.length+"px":"0px")}},e.nodes&&e.nodes.map((e,t)=>s.default.createElement(d.default,{key:e.nodeType+t,node:e})))))}render(){return s.default.createElement("div",{className:"flow-group"},this.NodePanel)}}t.default=l},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(4)),o={rect:e=>i.default.createElement("div",{className:"panel-node rect"},i.default.createElement("div",{draggable:"true","data-item":JSON.stringify(e),className:"node-item rect",style:{width:100,height:50,backgroundColor:e.fill,border:"2px solid "+e.stroke,borderRadius:4}},e.img&&i.default.createElement("img",{src:e.img,className:"panel-node-rect-icon"})),e.text),circle:e=>i.default.createElement("div",{className:"panel-node circle"},i.default.createElement("div",{draggable:"true","data-item":JSON.stringify(e),className:"node-item circle",style:{width:50,height:50,backgroundColor:e.fill,border:"2px solid "+e.stroke,borderRadius:"50%"}},i.default.createElement("img",{src:e.img,className:"panel-node-rect-icon"})),e.text),trigon:e=>{const t={inset:{top:"10px 0 0",bottom:"0 0 14px 0",left:"0 0 0 10px",right:"0 20px 8px 0"}[e.position]};return i.default.createElement("div",{className:"panel-node circle"},i.default.createElement("div",{draggable:"true","data-item":JSON.stringify(e),className:"node-item",style:{fontSize:64,color:e.fill,lineHeight:"50px",backgroundColor:"transparent",position:"relative"}},i.default.createElement("img",{src:e.img,className:"panel-node-rect-icon",style:Object.assign(Object.assign({position:"absolute"},t),{margin:"auto",width:30,height:30})}),{top:"▲",bottom:"▼",left:"◀︎",right:"▶"}[e.position?e.position:"top"]),e.text)},diamond:e=>i.default.createElement("div",{className:"panel-node"},i.default.createElement("div",{draggable:"true","data-item":JSON.stringify(e),className:"node-item diamond",style:{width:35,height:35,backgroundColor:e.fill,border:"2px solid "+e.stroke,borderRadius:4}},e.img&&i.default.createElement("img",{src:e.img,className:"panel-node-rect-icon diamond"})),e.text)};t.default=({node:e})=>o[e.thumbnail](e.attrs)},function(e,t,n){var a=n(7),i=n(51);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};a(i,o);e.exports=i.locals||{}},function(e,t,n){(t=n(8)(!1)).push([e.i,".flow-group {\n  font-size: 12px;\n}\n.flow-group .flow-group-panel .flow-group-panel-header {\n  height: 40px;\n  width: 100%;\n  border: 1px solid #c0c0c0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10px;\n}\n.flow-group .flow-group-panel .flow-group-panel-header .flow-group-panel-header-title {\n  display: flex;\n  align-items: center;\n  color: #504f4f;\n  transition: 0.3s;\n}\n.flow-group .flow-group-panel .flow-group-panel-header .flow-group-panel-header-title.active {\n  color: #007ef5;\n}\n.flow-group .flow-group-panel .flow-group-panel-header .flow-group-panel-header-title .flow-group-panel-header-name {\n  font-size: 14px;\n}\n.flow-group .flow-group-panel .flow-group-panel-header .flow-group-panel-header-title .flow-group-panel-header-icon {\n  font-size: 14px;\n  margin-right: 8px;\n}\n.flow-group .flow-group-panel .flow-group-panel-header .flow-group-panel-header-drop .flow-drop-down {\n  transition: 0.3s;\n}\n.flow-group .flow-group-panel .flow-group-panel-header .flow-group-panel-header-drop .flow-drop-down.active {\n  transform: rotate(90deg);\n  color: #007ef5;\n}\n.flow-group .flow-group-panel .flow-group-panel-body {\n  background-color: #f3f2f2;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  transition: 0.3s ease;\n  overflow: hidden;\n}\n.flow-group .flow-group-panel .flow-group-panel-body.show {\n  display: flex;\n}\n.flow-group .flow-group-panel .flow-group-panel-body.hide {\n  display: none;\n}\n.flow-group .panel-node {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: move;\n  position: relative;\n  flex-flow: column;\n  width: 100%;\n  margin-top: 8px;\n}\n.flow-group .panel-node .node-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.flow-group .panel-node .node-item .panel-node-rect-icon {\n  height: 30px;\n  width: 30px;\n  pointer-events: none;\n  border-radius: 50%;\n}\n.flow-group .panel-node .node-item .panel-node-rect-icon.diamond {\n  transform: rotate(-45deg);\n  width: 25px;\n  height: 25px;\n}\n.flow-group .panel-node .node-item.diamond {\n  transform: rotate(45deg);\n  margin-bottom: 10px;\n}\n.flow-group .panel-node + .panel-node {\n  border-top: 1px solid #c0c0c0;\n}\n.flow-group .panel-node + .panel-node .node-item {\n  margin-top: 8px;\n}\n@keyframes GroupHeaderUp {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes GroupHeaderDown {\n  from {\n    opacity: 1;\n  }\n  to {\n    height: 0px;\n    opacity: 0;\n  }\n}\n",""]),e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3);t.default=class{constructor(e){this._cfgs=a.deepMix(this.getDefaultCfg(),e)}getDefaultCfg(){return{container:null}}get(e){return this._cfgs[e]}set(e,t){this._cfgs[e]=t}initPlugin(e){const t=this.get("container").querySelectorAll("div[data-item]");a.each(t,(t,n)=>{t.addEventListener("dragstart",n=>{e.set("addNodeDragging",!0);const a=t.getAttribute("data-item"),i=JSON.parse(a),o=Object.assign({nodeType:i.nodeName,offsetX:n.offsetX,offsetY:n.offsetY},i);e.set("addNodeModel",o)}),t.addEventListener("dragend",t=>{e.emit("canvas:mouseup",t),e.set("addNodeDragging",!1)})})}destroy(){this.get("canvas").destroy();const e=this.get("container");e.parentNode.removeChild(e)}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=a(n(11));t.default=class{constructor(e={}){this._cfgs=i.deepMix(this.getDefaultCfg(),e)}getDefaultCfg(){return{container:null}}get(e){return this._cfgs[e]}set(e,t){this._cfgs[e]=t}initPlugin(e){e.set("MacroCommand",o.default)}destroy(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3),i=["copy","delete"];t.default=class{constructor(e){this._cfgs=a.deepMix(this.getDefaultCfg(),e)}getDefaultCfg(){return{container:null}}get(e){return this._cfgs[e]}set(e,t){this._cfgs[e]=t}initPlugin(e){const t=this.get("container"),n=t.querySelectorAll(".xioo-work-header .xioo-work-header-group div[data-command]");a.each(n,t=>{const n=t.getAttribute("data-command");let a=t.getAttribute("data-params");a=a?JSON.parse(a):{},t.addEventListener("click",()=>{const t=e.get("MacroCommand");t&&t.executeCommand(n,Object.assign({graph:e},a))})}),e.on("onSelectNode",e=>{i.forEach(e=>{t.querySelector(`.xioo-work-header .xioo-work-header-group div[data-command='${e}']`).classList.add("actionable")})}),e.on("onClearSelectNode",()=>{i.forEach(e=>{t.querySelector(`.xioo-work-header .xioo-work-header-group div[data-command='${e}']`).classList.remove("actionable")})})}destroy(){this.get("canvas").destroy();const e=this.get("container");e.parentNode.removeChild(e)}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(11)),o=a(n(56)),r=a(n(57)),s=a(n(58)),d=a(n(59)),l=a(n(60)),c=a(n(61)),h=a(n(62)),u=a(n(63)),f=a(n(64)),g=a(n(65)),p=a(n(66));t.default=(e=[])=>{i.default.registerCommand("reload",new o.default),i.default.registerCommand("copy",new r.default),i.default.registerCommand("delete",new s.default),i.default.registerCommand("blow",new d.default),i.default.registerCommand("fitView",new l.default),i.default.registerCommand("originSize",new c.default),i.default.registerCommand("layout",new h.default),i.default.registerCommand("fullScreen",new u.default),i.default.registerCommand("undo",new f.default),i.default.registerCommand("redo",new g.default),i.default.registerCommand("docat",new p.default),e.forEach(e=>{i.default.registerCommand(e.command,new e.CommandObject)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute(e){e.graph}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e}){const t=e.get("selectedItem");if(!t)return;const n=t.get("model"),a=Math.random();e.addItem("node",Object.assign(Object.assign({},n),{x:n.x+10,y:n.y+10,id:""+a})),e.paint();e.get("MacroCommand").executeCommand("docat",{graph:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e}){const t=e.get("selectedItem");if(!t)return;e.remove(t),e.set("selectedItem",null),e.emit("onClearSelectNode",null);e.get("MacroCommand").executeCommand("docat",{graph:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e,value:t}){const n=e.getZoom()+t;e.zoomTo(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e}){e.fitView(20)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e}){e.zoomTo(1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e}){e.layout()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e,domId:t}){const n=document.getElementById(t),a=n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullScreen;if(void 0!==a&&a)return a.call(n),void e.paint()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3);t.default=class{execute({graph:e}){const t=e.getUndoStack();if(!t||1===t.length)return;const n=t.pop();if(n){const{action:t}=n;e.pushStack(t,a.clone(n.data),"redo");let i=n.data.before;if("add"===t&&(i=n.data.after),!i)return;switch(t){case"visible":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{const n=e.findById(t.id);t.visible?e.showItem(n,!1):e.hideItem(n,!1)})});break;case"render":case"update":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{e.updateItem(t.id,t,!1)})});break;case"changedata":e.changeData(i,!1);break;case"delete":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{const n=t.itemType;delete t.itemType,e.addItem(n,t,!1)})});break;case"add":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{e.removeItem(t.id,!1)})});break;case"updateComboTree":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{e.updateComboTree(t.id,t.parentId,!1)})})}}e.get("MacroCommand").executeCommand("docat",{graph:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3);t.default=class{execute({graph:e}){const t=e.getRedoStack();if(!t||0===t.length)return;const n=t.pop();if(n){const{action:t}=n;let i=n.data.after;if(e.pushStack(t,a.clone(n.data)),"delete"===t&&(i=n.data.before),!i)return;switch(t){case"visible":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{const n=e.findById(t.id);t.visible?e.showItem(n,!1):e.hideItem(n,!1)})});break;case"render":case"update":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{e.updateItem(t.id,t,!1)})});break;case"changedata":e.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach(t=>{e.removeItem(t.id,!1)}),i.nodes&&i.nodes.forEach(t=>{e.removeItem(t.id,!1)}),i.combos&&i.combos.forEach(t=>{e.removeItem(t.id,!1)});break;case"add":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{const n=t.itemType;delete t.itemType,e.addItem(n,t,!1)})});break;case"updateComboTree":Object.keys(i).forEach(t=>{const n=i[t];n&&n.forEach(t=>{e.updateComboTree(t.id,t.parentId,!1)})})}}e.get("MacroCommand").executeCommand("docat",{graph:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{execute({graph:e}){this.operationStyle("undo",e),this.operationStyle("redo",e)}operationStyle(e,t){const n=document.querySelector(`div[data-command="${e}"]`);if("undo"===e){const e=t.getUndoStack();this.addStyle(n,!e||1===e.length)}if("redo"===e){const e=t.getRedoStack();this.addStyle(n,!e||0===e.length)}}addStyle(e,t){t?e.classList.remove("actionable"):e.classList.add("actionable")}}},function(e,t,n){var a=n(7),i=n(68);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};a(i,o);e.exports=i.locals||{}},function(e,t,n){(t=n(8)(!1)).push([e.i,"*,\n*::before,\n*::after {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n}\n.xioo-flow {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: column;\n  background-color: #fff;\n}\n.xioo-flow .xioo-flow-header {\n  height: 48px;\n  width: 100%;\n  background-color: #ffffff;\n  border-bottom: 1px solid #e0e0e0;\n  padding: 0px 24px;\n}\n.xioo-flow .xioo-flow-body {\n  display: flex;\n}\n.xioo-flow .xioo-flow-body .xioo-flow-body-node {\n  border-right: 1px solid #e0e0e0;\n  overflow: scroll;\n  height: 100%;\n}\n.xioo-flow .xioo-flow-body .xioo-flow-body-node .xioo-panel-item {\n  width: 100%;\n  height: 50px;\n  background-color: chocolate;\n}\n",""]),e.exports=t},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolItem=t.ToolGroup=void 0;const i=a(n(70));t.ToolGroup=i.default;const o=a(n(72));t.ToolItem=o.default},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(71));t.default=i.default},function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(4)),s=r.memo(({children:e,onChange:t})=>r.default.createElement("div",{className:"xioo-work-header-group"},r.default.Children.map(e,(e,n)=>{let a=e.props;return r.default.cloneElement(e,Object.assign(Object.assign({},a),{onChange:t}))})));t.default=s},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(n(73));t.default=i.default},function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(4)),s=r.memo(({text:e,icon:t,command:n,params:a,status:i=!0,event:o,onChange:s})=>{const[d,l]=r.useState({});return r.useEffect(()=>{const e={};n&&(e["data-command"]=n),a&&(e["data-params"]=JSON.stringify(a)),l(e)},[]),r.default.createElement("div",Object.assign({className:"xioo-work-header-group-icon "+(i?"actionable":"")},d,{onClick:()=>{s&&s(o)}}),r.default.createElement("span",{className:"operate fa "+t}),r.default.createElement("span",{className:"icon-text"},e))});t.default=s}])}));